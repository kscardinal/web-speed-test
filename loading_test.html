<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Speedometer Progress</title>
<style>
  body {
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    height: 100vh;
    background: #222;
    color: white;
    font-family: sans-serif;
  }

  svg {
    transform: rotate(135deg); /* Align left end at 225° */
  }

  circle {
    fill: none;
    stroke-width: 20;
    stroke-linecap: round; /* Rounded ends */
  }

  .background {
    stroke: #555; /* Gray arc */
    stroke-dasharray: 318; /* 270° portion */
    stroke-dashoffset: 0;   /* Full gray arc */
  }

  .progress {
    stroke: #00aaff; /* Blue fill */
    stroke-dasharray: 0 424;
    stroke-dashoffset: 0; /* Start empty */
  }

  text {
    font-size: 24px;
    fill: white;
    text-anchor: middle;
    dominant-baseline: middle;
    transform: rotate(-135deg); /* cancel parent SVG rotation */
    transform-origin: center;
  }

  button {
    margin-top: 30px;
    padding: 10px 20px;
    font-size: 16px;
    cursor: pointer;
  }

  #ping-text {
    font-size: 2.5rem;
    font-weight: bold;
    fill: #FFF;
    margin: 0rem;
    text-anchor: middle;
    dominant-baseline: middle;
    transform: rotate(-135deg); /* cancel parent SVG rotation */
    transform-origin: center;
  }

  #ping-ms-text {
        fill: #FFF;
        opacity: 30%;
        font-size: 1rem;
        font-weight: bold;
        margin: 0rem;
        display: inline;
         text-anchor: middle;
        dominant-baseline: middle;
        transform: rotate(-135deg); /* cancel parent SVG rotation */
        transform-origin: center;
    }

    #ping-average-text {
        fill: #FFF;
        opacity: 30%;
        font-size: 1rem;
        font-weight: bold;
        margin-top: 0rem;
         text-anchor: middle;
        dominant-baseline: middle;
        transform: rotate(-135deg); /* cancel parent SVG rotation */
        transform-origin: center;
    }

</style>
</head>
<body>

<svg width="300" height="300" viewBox="0 0 200 200">
  <!-- Gray background arc -->
  <circle class="background" cx="100" cy="100" r="67.5"/>
  <!-- Blue progress arc -->
  <circle class="progress" cx="100" cy="100" r="67.5"/>
  <text x="100" y="100" id="ping-text">34</text>
  <text x="100" y="125" id="ping-ms-text">ms</text>
  <text x="100" y="150" id="ping-average-text">avg.</text>
</svg>

<button id="start">Start Progress</button>

<script>
const progress = document.querySelector('.progress');
const progressText = document.querySelector('text')
const radius = 67.5;
const fullArc = 2 * Math.PI * radius * 0.75; // 270° span
const fullCircle = 2 * Math.PI * radius // 360° span 

document.getElementById('start').addEventListener('click', () => {
  let startTime = null;
  const duration = 5000; // 5 seconds

  function animate(time) {
    if (!startTime) startTime = time;
    const elapsed = time - startTime;
    const percent = Math.min(elapsed / duration, 1);

    // Reduce dash offset to reveal blue from left (225°) to right (-45°)
    const startNumber = fullArc * percent
    const endNumber = fullCircle - startNumber
    progress.style.strokeDasharray = `${startNumber} ${endNumber}`;
    progressText.textContent = `${Math.round(percent * 100)}%`;

    if (percent < 1) {
      requestAnimationFrame(animate);
    }
  }

  requestAnimationFrame(animate);
});
</script>

</body>
</html>
